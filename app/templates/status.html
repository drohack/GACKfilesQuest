<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Page - GACKfiles Quest</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>GACKfiles - Field Reports</h1>
            <div class="header-actions">
                <a href="{{ url_for('qrscan') }}" class="btn btn-primary">Scan Evidence</a>
                {% if is_admin %}
                <a href="{{ url_for('admin') }}" class="btn btn-secondary">Admin Panel</a>
                {% endif %}
                <a href="{{ url_for('logout') }}" class="btn btn-secondary">Sign Out</a>
            </div>
        </div>

        <div class="cryptid-container">
            <h2 class="cryptid-title">TARGET: UNKNOWN CRYPTID</h2>
            <p class="cryptid-subtitle">Collect evidence from each body part to complete the investigation</p>

            <div class="cryptid-diagram">
                <!-- Central cryptid silhouette -->
                <div class="cryptid-silhouette">
                    <div class="cryptid-head"></div>
                    <div class="cryptid-body"></div>
                    <div class="cryptid-tail"></div>
                    <div class="cryptid-leg left"></div>
                    <div class="cryptid-leg right"></div>
                    <div class="cryptid-claw left"></div>
                    <div class="cryptid-claw right"></div>
                </div>

                <!-- Video markers with connecting lines -->
                {% for video in videos %}
                {% set found = video.found_at %}
                {% set solved = video.unlocked_at %}

                <div class="evidence-marker marker-{{ video.id }} {% if solved %}solved{% elif found %}found{% else %}missing{% endif %}"
                     data-part="{{ video.title }}">
                    <div class="marker-line"></div>
                    <div class="marker-content">
                        <div class="marker-header">
                            <span class="marker-icon">
                                {% if solved %}âœ“{% elif found %}ðŸ“‚{% else %}?{% endif %}
                            </span>
                            <h3>{{ video.title }}</h3>
                        </div>
                        <div class="marker-info">
                            {% if solved %}
                            <p class="marker-status solved">SOLVED</p>
                            <a href="{{ url_for('video', id=video.id) }}" class="marker-link">Review</a>
                            {% elif found %}
                            <p class="marker-status found">FOUND</p>
                            <a href="{{ url_for('video', id=video.id) }}" class="marker-link">Investigate</a>
                            {% else %}
                            <p class="marker-status missing">{{ video.hint }}</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <!-- Progress summary -->
            <div class="progress-summary">
                <div class="progress-stat">
                    <span class="stat-number">{{ unlocked_count }}</span>
                    <span class="stat-label">Solved</span>
                </div>
                <div class="progress-stat">
                    <span class="stat-number">{{ found_count }}</span>
                    <span class="stat-label">Found</span>
                </div>
                <div class="progress-stat">
                    <span class="stat-number">{{ total_count }}</span>
                    <span class="stat-label">Total</span>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
